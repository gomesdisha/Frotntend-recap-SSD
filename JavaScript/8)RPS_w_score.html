<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rock paper scissor game</title>
</head>
<body>

  <p>Rock Paper Scissors Game</p>

  <button onclick=" 
      playGame('rock'); " >
    Rock</button>

  <button onclick=" 
      playGame('paper');" >
    Paper</button>

  <button onclick=" 
      playGame('scissors');" >
    Scissors</button>
  
  <button onclick=" 
  score.wins = 0;
  score.losses=0;
  score.ties=0;
  localStorage.removeItem('score');">
    Reset Score
  </button>

  <script>
    let computerMove ='';
    let result ='';
    let randomNumber;
    let userMove ='';

    let score= JSON.parse(localStorage.getItem('score')) || 
    {
      wins: 0,
      losses: 0,
      ties: 0
    }; //if we reset score i.e. score=0 or !score the second part of or is executed . 
    // Else whatever is the score is parsed(convert json stored in local storage to normal js object format) and extracted using getItem method.
    //Stringify is used to convert js obj format to json format

    function pickMove()
    {
      randomNumber = Math.random()
      if(0<=randomNumber && randomNumber<1/3) 
        { computerMove = 'rock';}
      else if(1/3<=randomNumber && randomNumber<2/3)
        { computerMove = 'paper';}
      else
        { computerMove = 'scissors';}
          
        console.log(computerMove);
    }


    function playGame(userMove)
    {
      pickMove();
      //let playerMove = userMove;
      if(userMove=='rock')
      {
        if(computerMove=== userMove)
        { result = 'Tie!';}
        else if( computerMove=== 'paper')
        { result = 'You lose!';}
        else
        {result = 'You win!'; }
      }

      else if(userMove=='paper')
      {
        if(computerMove=== userMove)
        { result = 'Tie!';}
        else if( computerMove=== 'scissors')
        { result = 'You lose!';}
        else
        {result = 'You win!'; }
      }

      else if(userMove=='scissors')
      {
        if(computerMove=== userMove)
        { result = 'Tie!';}
        else if( computerMove=== 'rock')
        { result = 'You lose!';}
        else
        {result = 'You win!'; }
      }

      if(result==='You win!')
      { score.wins+=1;}
      else if(result==='You lose!')
      { score.losses+=1;}
      else {score.ties+=1;}

    //   showResult();
    // }

    // function showResult()
    // {

      localStorage.setItem('score', JSON.stringify(score)); //converts js obj to json format and stores in local storage with key 'score'
      
      alert(`You chose ${userMove}. Computer picked ${computerMove}. ${result}
Wins: ${score.wins}, Losses:${score.losses}, Ties:${score.ties}`);
//}
  }

  </script>

</body>
</html>
